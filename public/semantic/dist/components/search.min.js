/*!
 * # Semantic UI 2.2.7 - Search
 * http://github.com/semantic-org/semantic-ui/
 *
 *
 * Released under the MIT license
 * http://opensource.org/licenses/MIT
 *
 */
!function(e,t,s,n){"use strict";t=void 0!==t&&t.Math==Math?t:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),e.fn.search=function(n){var i,r=e(this),a=r.selector||"",o=(new Date).getTime(),c=[],u=arguments[0],l="string"==typeof u,d=[].slice.call(arguments,1);return e(this).each(function(){var v,f=e.isPlainObject(n)?e.extend(!0,{},e.fn.search.settings,n):e.extend({},e.fn.search.settings),g=f.className,h=f.metadata,p=f.regExp,m=f.fields,b=f.selector,y=f.error,R=f.namespace,C="."+R,w=R+"-module",x=e(this),j=x.find(b.prompt),k=x.find(b.searchButton),A=x.find(b.results),E=x.find(b.result),q=x.find(b.category),F=this,S=x.data(w),T=!1;v={initialize:function(){v.verbose("Initializing module"),v.determine.searchFields(),v.bind.events(),v.set.type(),v.create.results(),v.instantiate()},instantiate:function(){v.verbose("Storing instance of module",v),S=v,x.data(w,v)},destroy:function(){v.verbose("Destroying instance"),x.off(C).removeData(w)},refresh:function(){v.debug("Refreshing selector cache"),j=x.find(b.prompt),k=x.find(b.searchButton),q=x.find(b.category),A=x.find(b.results),E=x.find(b.result)},refreshResults:function(){A=x.find(b.results),E=x.find(b.result)},bind:{events:function(){v.verbose("Binding events to search"),f.automatic&&(x.on(v.get.inputEvent()+C,b.prompt,v.event.input),j.attr("autocomplete","off")),x.on("focus"+C,b.prompt,v.event.focus).on("blur"+C,b.prompt,v.event.blur).on("keydown"+C,b.prompt,v.handleKeyboard).on("click"+C,b.searchButton,v.query).on("mousedown"+C,b.results,v.event.result.mousedown).on("mouseup"+C,b.results,v.event.result.mouseup).on("click"+C,b.result,v.event.result.click)}},determine:{searchFields:function(){n&&void 0!==n.searchFields&&(f.searchFields=n.searchFields)}},event:{input:function(){clearTimeout(v.timer),v.timer=setTimeout(v.query,f.searchDelay)},focus:function(){v.set.focus(),v.has.minimumCharacters()&&(v.query(),v.can.show()&&v.showResults())},blur:function(e){var t=s.activeElement===this,n=function(){v.cancel.query(),v.remove.focus(),v.timer=setTimeout(v.hideResults,f.hideDelay)};t||(v.resultsClicked?(v.debug("Determining if user action caused search to close"),x.one("click.close"+C,b.results,function(e){if(v.is.inMessage(e)||T)return void j.focus();T=!1,v.is.animating()||v.is.hidden()||n()})):(v.debug("Input blurred without user action, closing results"),n()))},result:{mousedown:function(){v.resultsClicked=!0},mouseup:function(){v.resultsClicked=!1},click:function(s){v.debug("Search result selected");var n=e(this),i=n.find(b.title).eq(0),r=n.is("a[href]")?n:n.find("a[href]").eq(0),a=r.attr("href")||!1,o=r.attr("target")||!1,c=(i.html(),i.length>0&&i.text()),u=v.get.results(),l=n.data(h.result)||v.get.result(c,u);if(e.isFunction(f.onSelect)&&f.onSelect.call(F,l,u)===!1)return v.debug("Custom onSelect callback cancelled default select action"),void(T=!0);v.hideResults(),c&&v.set.value(c),a&&(v.verbose("Opening search link found in result",r),"_blank"==o||s.ctrlKey?t.open(a):t.location.href=a)}}},handleKeyboard:function(e){var t,s=x.find(b.result),n=x.find(b.category),i=s.filter("."+g.active),r=s.index(i),a=s.length,o=i.length>0,c=e.which,u={backspace:8,enter:13,escape:27,upArrow:38,downArrow:40};if(c==u.escape&&(v.verbose("Escape key pressed, blurring search field"),v.trigger.blur()),v.is.visible())if(c==u.enter){if(v.verbose("Enter key pressed, selecting active result"),s.filter("."+g.active).length>0)return v.event.result.click.call(s.filter("."+g.active),e),e.preventDefault(),!1}else c==u.upArrow&&o?(v.verbose("Up key pressed, changing active result"),t=r-1<0?r:r-1,n.removeClass(g.active),s.removeClass(g.active).eq(t).addClass(g.active).closest(n).addClass(g.active),e.preventDefault()):c==u.downArrow&&(v.verbose("Down key pressed, changing active result"),t=r+1>=a?r:r+1,n.removeClass(g.active),s.removeClass(g.active).eq(t).addClass(g.active).closest(n).addClass(g.active),e.preventDefault());else c==u.enter&&(v.verbose("Enter key pressed, executing query"),v.query(),v.set.buttonPressed(),j.one("keyup",v.remove.buttonFocus))},setup:{api:function(t){var s={debug:f.debug,on:!1,cache:!0,action:"search",urlData:{query:t},onSuccess:function(e){v.parse.response.call(F,e,t)},onAbort:function(e){},onFailure:function(){v.displayMessage(y.serverError)},onError:v.error};e.extend(!0,s,f.apiSettings),v.verbose("Setting up API request",s),x.api(s)}},can:{useAPI:function(){return void 0!==e.fn.api},show:function(){return v.is.focused()&&!v.is.visible()&&!v.is.empty()},transition:function(){return f.transition&&void 0!==e.fn.transition&&x.transition("is supported")}},is:{animating:function(){return A.hasClass(g.animating)},hidden:function(){return A.hasClass(g.hidden)},inMessage:function(t){if(t.target){var n=e(t.target);return e.contains(s.documentElement,t.target)&&n.closest(b.message).length>0}},empty:function(){return""===A.html()},visible:function(){return A.filter(":visible").length>0},focused:function(){return j.filter(":focus").length>0}},trigger:{blur:function(){var e=s.createEvent("HTMLEvents"),t=j[0];t&&(v.verbose("Triggering native blur event"),e.initEvent("blur",!1,!1),t.dispatchEvent(e))}},get:{inputEvent:function(){var e=j[0];return void 0!==e&&void 0!==e.oninput?"input":void 0!==e&&void 0!==e.onpropertychange?"propertychange":"keyup"},value:function(){return j.val()},results:function(){return x.data(h.results)},result:function(t,s){var n=["title","id"],i=!1;return t=void 0!==t?t:v.get.value(),s=void 0!==s?s:v.get.results(),"category"===f.type?(v.debug("Finding result that matches",t),e.each(s,function(s,r){if(e.isArray(r.results)&&(i=v.search.object(t,r.results,n)[0]))return!1})):(v.debug("Finding result in results object",t),i=v.search.object(t,s,n)[0]),i||!1}},select:{firstResult:function(){v.verbose("Selecting first result"),E.first().addClass(g.active)}},set:{focus:function(){x.addClass(g.focus)},loading:function(){x.addClass(g.loading)},value:function(e){v.verbose("Setting search input value",e),j.val(e)},type:function(e){e=e||f.type,"category"==f.type&&x.addClass(f.type)},buttonPressed:function(){k.addClass(g.pressed)}},remove:{loading:function(){x.removeClass(g.loading)},focus:function(){x.removeClass(g.focus)},buttonPressed:function(){k.removeClass(g.pressed)}},query:function(){var t=v.get.value(),s=v.read.cache(t);v.has.minimumCharacters()?(s?(v.debug("Reading result from cache",t),v.save.results(s.results),v.addResults(s.html),v.inject.id(s.results)):(v.debug("Querying for",t),e.isPlainObject(f.source)||e.isArray(f.source)?v.search.local(t):v.can.useAPI()?v.search.remote(t):v.error(y.source)),f.onSearchQuery.call(F,t)):v.hideResults()},search:{local:function(e){var t,s=v.search.object(e,f.content);v.set.loading(),v.save.results(s),v.debug("Returned local search results",s),t=v.generateResults({results:s}),v.remove.loading(),v.addResults(t),v.inject.id(s),v.write.cache(e,{html:t,results:s})},remote:function(e){x.api("is loading")&&x.api("abort"),v.setup.api(e),x.api("query")},object:function(t,s,n){var i=[],r=[],a=t.toString().replace(p.escape,"\\$&"),o=new RegExp(p.beginsWith+a,"i"),c=function(t,s){var n=e.inArray(s,i)==-1,a=e.inArray(s,r)==-1;n&&a&&t.push(s)};return s=s||f.source,n=void 0!==n?n:f.searchFields,e.isArray(n)||(n=[n]),void 0===s||s===!1?(v.error(y.source),[]):(e.each(n,function(n,a){e.each(s,function(e,s){"string"==typeof s[a]&&(s[a].search(o)!==-1?c(i,s):f.searchFullText&&v.fuzzySearch(t,s[a])&&c(r,s))})}),e.merge(i,r))}},fuzzySearch:function(e,t){var s=t.length,n=e.length;if("string"!=typeof e)return!1;if(e=e.toLowerCase(),t=t.toLowerCase(),n>s)return!1;if(n===s)return e===t;e:for(var i=0,r=0;i<n;i++){for(var a=e.charCodeAt(i);r<s;)if(t.charCodeAt(r++)===a)continue e;return!1}return!0},parse:{response:function(e,t){var s=v.generateResults(e);v.verbose("Parsing server response",e),void 0!==e&&void 0!==t&&void 0!==e[m.results]&&(v.addResults(s),v.inject.id(e[m.results]),v.write.cache(t,{html:s,results:e[m.results]}),v.save.results(e[m.results]))}},cancel:{query:function(){v.can.useAPI()&&x.api("abort")}},has:{minimumCharacters:function(){return v.get.value().length>=f.minCharacters}},clear:{cache:function(e){var t=x.data(h.cache);e?e&&t&&t[e]&&(v.debug("Removing value from cache",e),delete t[e],x.data(h.cache,t)):(v.debug("Clearing cache",e),x.removeData(h.cache))}},read:{cache:function(e){var t=x.data(h.cache);return!!f.cache&&(v.verbose("Checking cache for generated html for query",e),"object"==typeof t&&void 0!==t[e]&&t[e])}},create:{id:function(e,t){var s,n,i=e+1;return void 0!==t?(s=String.fromCharCode(97+t),n=s+i,v.verbose("Creating category result id",n)):(n=i,v.verbose("Creating result id",n)),n},results:function(){0===A.length&&(A=e("<div />").addClass(g.results).appendTo(x))}},inject:{result:function(e,t,s){v.verbose("Injecting result into results");var n=void 0!==s?A.children().eq(s).children(b.result).eq(t):A.children(b.result).eq(t);v.verbose("Injecting results metadata",n),n.data(h.result,e)},id:function(t){v.debug("Injecting unique ids into results");var s=0,n=0;return"category"===f.type?e.each(t,function(t,i){n=0,e.each(i.results,function(e,t){var r=i.results[e];void 0===r.id&&(r.id=v.create.id(n,s)),v.inject.result(r,n,s),n++}),s++}):e.each(t,function(e,s){var i=t[e];void 0===i.id&&(i.id=v.create.id(n)),v.inject.result(i,n),n++}),t}},save:{results:function(e){v.verbose("Saving current search results to metadata",e),x.data(h.results,e)}},write:{cache:function(e,t){var s=void 0!==x.data(h.cache)?x.data(h.cache):{};f.cache&&(v.verbose("Writing generated html to cache",e,t),s[e]=t,x.data(h.cache,s))}},addResults:function(t){if(e.isFunction(f.onResultsAdd)&&f.onResultsAdd.call(A,t)===!1)return v.debug("onResultsAdd callback cancelled default action"),!1;t?(A.html(t),v.refreshResults(),f.selectFirstResult&&v.select.firstResult(),v.showResults()):v.hideResults()},showResults:function(){v.is.visible()||(v.can.transition()?(v.debug("Showing results with css animations"),A.transition({animation:f.transition+" in",debug:f.debug,verbose:f.verbose,duration:f.duration,queue:!0})):(v.debug("Showing results with javascript"),A.stop().fadeIn(f.duration,f.easing)),f.onResultsOpen.call(A))},hideResults:function(){v.is.visible()&&(v.can.transition()?(v.debug("Hiding results with css animations"),A.transition({animation:f.transition+" out",debug:f.debug,verbose:f.verbose,duration:f.duration,queue:!0})):(v.debug("Hiding results with javascript"),A.stop().fadeOut(f.duration,f.easing)),f.onResultsClose.call(A))},generateResults:function(t){v.debug("Generating html from response",t);var s=f.templates[f.type],n=e.isPlainObject(t[m.results])&&!e.isEmptyObject(t[m.results]),i=e.isArray(t[m.results])&&t[m.results].length>0,r="";return n||i?(f.maxResults>0&&(n?"standard"==f.type&&v.error(y.maxResults):t[m.results]=t[m.results].slice(0,f.maxResults)),e.isFunction(s)?r=s(t,m):v.error(y.noTemplate,!1)):f.showNoResults&&(r=v.displayMessage(y.noResults,"empty")),f.onResults.call(F,t),r},displayMessage:function(e,t){return t=t||"standard",v.debug("Displaying message",e,t),v.addResults(f.templates.message(e,t)),f.templates.message(e,t)},setting:function(t,s){if(e.isPlainObject(t))e.extend(!0,f,t);else{if(void 0===s)return f[t];f[t]=s}},internal:function(t,s){if(e.isPlainObject(t))e.extend(!0,v,t);else{if(void 0===s)return v[t];v[t]=s}},debug:function(){!f.silent&&f.debug&&(f.performance?v.performance.log(arguments):(v.debug=Function.prototype.bind.call(console.info,console,f.name+":"),v.debug.apply(console,arguments)))},verbose:function(){!f.silent&&f.verbose&&f.debug&&(f.performance?v.performance.log(arguments):(v.verbose=Function.prototype.bind.call(console.info,console,f.name+":"),v.verbose.apply(console,arguments)))},error:function(){f.silent||(v.error=Function.prototype.bind.call(console.error,console,f.name+":"),v.error.apply(console,arguments))},performance:{log:function(e){var t,s,n;f.performance&&(t=(new Date).getTime(),n=o||t,s=t-n,o=t,c.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:F,"Execution Time":s})),clearTimeout(v.performance.timer),v.performance.timer=setTimeout(v.performance.display,500)},display:function(){var t=f.name+":",s=0;o=!1,clearTimeout(v.performance.timer),e.each(c,function(e,t){s+=t["Execution Time"]}),t+=" "+s+"ms",a&&(t+=" '"+a+"'"),r.length>1&&(t+=" ("+r.length+")"),(void 0!==console.group||void 0!==console.table)&&c.length>0&&(console.groupCollapsed(t),console.table?console.table(c):e.each(c,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),c=[]}},invoke:function(t,s,n){var r,a,o,c=S;return s=s||d,n=F||n,"string"==typeof t&&void 0!==c&&(t=t.split(/[\. ]/),r=t.length-1,e.each(t,function(s,n){var i=s!=r?n+t[s+1].charAt(0).toUpperCase()+t[s+1].slice(1):t;if(e.isPlainObject(c[i])&&s!=r)c=c[i];else{if(void 0!==c[i])return a=c[i],!1;if(!e.isPlainObject(c[n])||s==r)return void 0!==c[n]&&(a=c[n],!1);c=c[n]}})),e.isFunction(a)?o=a.apply(n,s):void 0!==a&&(o=a),e.isArray(i)?i.push(o):void 0!==i?i=[i,o]:void 0!==o&&(i=o),a}},l?(void 0===S&&v.initialize(),v.invoke(u)):(void 0!==S&&S.invoke("destroy"),v.initialize())}),void 0!==i?i:this},e.fn.search.settings={name:"Search",namespace:"search",silent:!1,debug:!1,verbose:!1,performance:!0,type:"standard",minCharacters:1,selectFirstResult:!1,apiSettings:!1,source:!1,searchFields:["title","description"],displayField:"",searchFullText:!0,automatic:!0,hideDelay:0,searchDelay:200,maxResults:7,cache:!0,showNoResults:!0,transition:"scale",duration:200,easing:"easeOutExpo",onSelect:!1,onResultsAdd:!1,onSearchQuery:function(e){},onResults:function(e){},onResultsOpen:function(){},onResultsClose:function(){},className:{animating:"animating",active:"active",empty:"empty",focus:"focus",hidden:"hidden",loading:"loading",results:"results",pressed:"down"},error:{source:"Cannot search. No source used, and Semantic API module was not included",noResults:"Your search returned no results",logging:"Error in debug logging, exiting.",noEndpoint:"No search endpoint was specified",noTemplate:"A valid template name was not specified.",serverError:"There was an issue querying the server.",maxResults:"Results must be an array to use maxResults setting",method:"The method you called is not defined."},metadata:{cache:"cache",results:"results",result:"result"},regExp:{escape:/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,beginsWith:"(?:s|^)"},fields:{categories:"results",categoryName:"name",categoryResults:"results",description:"description",image:"image",price:"price",results:"results",title:"title",url:"url",action:"action",actionText:"text",actionURL:"url"},selector:{prompt:".prompt",searchButton:".search.button",results:".results",message:".results > .message",category:".category",result:".result",title:".title, .name"},templates:{escape:function(e){var t=/[&<>"'`]/,s={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},n=function(e){return s[e]};return t.test(e)?e.replace(/[&<>"'`]/g,n):e},message:function(e,t){var s="";return void 0!==e&&void 0!==t&&(s+='<div class="message '+t+'">',s+="empty"==t?'<div class="header">No Results</div class="header"><div class="description">'+e+'</div class="description">':' <div class="description">'+e+"</div>",s+="</div>"),s},category:function(t,s){var n="";e.fn.search.settings.templates.escape;return void 0!==t[s.categoryResults]&&(e.each(t[s.categoryResults],function(t,i){void 0!==i[s.results]&&i.results.length>0&&(n+='<div class="category">',void 0!==i[s.categoryName]&&(n+='<div class="name">'+i[s.categoryName]+"</div>"),e.each(i.results,function(e,t){n+=t[s.url]?'<a class="result" href="'+t[s.url]+'">':'<a class="result">',void 0!==t[s.image]&&(n+='<div class="image"> <img src="'+t[s.image]+'"></div>'),n+='<div class="content">',void 0!==t[s.price]&&(n+='<div class="price">'+t[s.price]+"</div>"),void 0!==t[s.title]&&(n+='<div class="title">'+t[s.title]+"</div>"),void 0!==t[s.description]&&(n+='<div class="description">'+t[s.description]+"</div>"),n+="</div>",n+="</a>"}),n+="</div>")}),t[s.action]&&(n+='<a href="'+t[s.action][s.actionURL]+'" class="action">'+t[s.action][s.actionText]+"</a>"),n)},standard:function(t,s){var n="";return void 0!==t[s.results]&&(e.each(t[s.results],function(e,t){n+=t[s.url]?'<a class="result" href="'+t[s.url]+'">':'<a class="result">',void 0!==t[s.image]&&(n+='<div class="image"> <img src="'+t[s.image]+'"></div>'),n+='<div class="content">',void 0!==t[s.price]&&(n+='<div class="price">'+t[s.price]+"</div>"),void 0!==t[s.title]&&(n+='<div class="title">'+t[s.title]+"</div>"),void 0!==t[s.description]&&(n+='<div class="description">'+t[s.description]+"</div>"),n+="</div>",n+="</a>"}),t[s.action]&&(n+='<a href="'+t[s.action][s.actionURL]+'" class="action">'+t[s.action][s.actionText]+"</a>"),n)}}}}(jQuery,window,document);